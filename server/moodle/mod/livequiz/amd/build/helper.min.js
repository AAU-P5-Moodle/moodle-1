define("mod_livequiz/helper",["exports","core/templates"],(function(_exports,_templates){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.addAnswerButtonEventListener=void 0,_exports.addCancelEditButtonListener=function(context){let discardQuestionButton=document.querySelector(".cancel_question_button"),modalDiv=document.querySelector(".backdrop"),stringForConfirm="";switch(context){case"create":stringForConfirm="Are you sure you want to cancel creating the question?";break;case"edit":stringForConfirm="Are you sure you want to cancel editing the question?";break;case"import":stringForConfirm="Are you sure you want to cancel importing the question?";break;default:stringForConfirm="Are you sure you want to cancel the changes made?"}discardQuestionButton.addEventListener("click",(()=>{confirm(stringForConfirm)&&modalDiv.remove()}))},_exports.appendAnswerInput=appendAnswerInput,_exports.createAnswerContainer=createAnswerContainer,_exports.getQuestionData=function(){let questionTitle=document.getElementById("question_title_id").value.trim(),questionDescription=document.getElementById("question_description_id").value.trim(),questionExplanation=document.getElementById("question_explanation_id").value.trim(),questionType=document.getElementById("question_type_checkbox_id").checked?1:0;return{title:questionTitle,description:questionDescription,explanation:questionExplanation,type:questionType}},_exports.prepareAnswers=function(){let answers=[],answersDiv=document.querySelector(".all_answers_for_question_div");for(let i=0;i<answersDiv.children.length;i++){let answerText=answersDiv.children[i].querySelector(".answer_input").value.trim(),isCorrect=answersDiv.children[i].querySelector(".answer_checkbox").checked;isCorrect=isCorrect?1:0,answers.push({description:answerText,correct:isCorrect,explanation:""})}return answers},_exports.rerenderSavedQuestionsList=function(questions,callback){const contextSavedQuestions={questions:questions};document.querySelector("#saved_questions_list").remove(),_templates.default.renderForPromise("mod_livequiz/saved_questions_list",contextSavedQuestions,"boost").then((_ref=>{let{html:html,js:js}=_ref;_templates.default.appendNodeContents("#saved_questions_container",html,js),"function"==typeof callback&&callback()})).catch((error=>window.console.log(error)))},_exports.rerenderTakeQuizButton=function(url,hasQuestions,callback){const contextTakeQuiz={url:url,hasquestions:hasQuestions};if(hasQuestions){let noQuestionParagraph=document.querySelector(".no_question_text");if(noQuestionParagraph)noQuestionParagraph.remove();else{document.querySelector("#take_quiz_button").remove()}}else{document.querySelector("#take_quiz_button").remove()}_templates.default.renderForPromise("mod_livequiz/take_quiz_button",contextTakeQuiz,"boost").then((_ref2=>{let{html:html,js:js}=_ref2;_templates.default.appendNodeContents("#page_mod_livequiz_quizcreator",html,js),"function"==typeof callback&&callback()})).catch((error=>window.console.log(error)))},_exports.validateSubmission=function(answers){let isValid=!0,answersValid=!0,questionTitle=document.getElementById("question_title_id").value.trim(),questionTitleTextarea=document.getElementById("question_title_id"),questionTitleAlert=document.getElementById("title_textarea_alert"),questionDescription=document.getElementById("question_description_id").value.trim(),questionDescriptionTextarea=document.getElementById("question_description_id"),questionDescriptionAlert=document.getElementById("question_textarea_alert"),atLeastOneCorrectAnswerAlert=document.getElementById("question_alert_one_correct"),answerDescriptionAlert=document.getElementById("question_alert_description"),atLeastTwoAnswersAlert=document.getElementById("question_alert_two_answers"),maxOneCorrectAnswerAlert=document.getElementById("question_alert_max_one_correct"),questionType=document.getElementById("question_type_checkbox_id").checked,answersBox=document.getElementById("all_answers"),isValidText=document.getElementById("validText");const setBorderStyle=(element,isValid)=>{element.style.border=isValid?"1px solid #ccc":"1px solid red"};questionTitle?(questionTitleAlert.style.display="none",setBorderStyle(questionTitleTextarea,!0)):(setBorderStyle(questionTitleTextarea,!!questionTitle),questionTitleAlert.style.display="block",isValid=!1);questionDescription?(questionDescriptionAlert.style.display="none",setBorderStyle(questionDescriptionTextarea,!0)):(setBorderStyle(questionDescriptionTextarea,!!questionDescription),questionDescriptionAlert.style.display="block",isValid=!1);answers.length<2?(isValid=!1,answersValid=!1,atLeastTwoAnswersAlert.style.display="block"):atLeastTwoAnswersAlert.style.display="none";answers.some((answer=>1===answer.correct))?atLeastOneCorrectAnswerAlert.style.display="none":(isValid=!1,answersValid=!1,atLeastOneCorrectAnswerAlert.style.display="block");answers.some((answer=>!answer.description.trim()))?(isValid=!1,answersValid=!1,answerDescriptionAlert.style.display="block"):answerDescriptionAlert.style.display="none";if(questionType){let checkedAnswers=0;answers.forEach((answer=>{checkedAnswers+=answer.correct})),checkedAnswers>1?(isValid=!1,answersValid=!1,maxOneCorrectAnswerAlert.style.display="block"):maxOneCorrectAnswerAlert.style.display="none"}else maxOneCorrectAnswerAlert.style.display="none";answersBox.style.display=answersValid?"none":"block";if(!isValid)return isValidText.style.display="block",!1;return!0},_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};let IDs=0;function appendAnswerInput(){let answerContainer=createAnswerContainer(IDs+1);document.querySelector(".all_answers_for_question_div").appendChild(answerContainer),IDs++}function createAnswerContainer(id){let answerContainer=document.createElement("div");answerContainer.className="container_for_new_answer";let answerInput=document.createElement("input");answerInput.className="answer_input",answerInput.placeholder="Enter answer",answerInput.id="answer_input_"+id,answerInput.setAttribute("required",!0);let answerCheckbox=document.createElement("input");answerCheckbox.setAttribute("type","checkbox"),answerCheckbox.className="answer_checkbox",answerCheckbox.id="answer_checkbox_"+id;let deleteAnswerButton=function(type,className,content){let elementName=document.createElement(type);return elementName.className=className,elementName.textContent=content,elementName}("button","delete_answer_button","X");return deleteAnswerButton.id="delete_answer_button_"+id,answerContainer.appendChild(answerCheckbox),answerContainer.appendChild(answerInput),answerContainer.appendChild(deleteAnswerButton),deleteAnswerButton.addEventListener("click",(()=>{answerContainer.remove()})),answerContainer}_exports.addAnswerButtonEventListener=()=>{document.querySelector(".add_new_answer_to_question").addEventListener("click",(()=>{appendAnswerInput()}))}}));

//# sourceMappingURL=helper.min.js.map