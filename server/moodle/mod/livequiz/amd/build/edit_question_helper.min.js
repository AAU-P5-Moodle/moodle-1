define("mod_livequiz/edit_question_helper",["exports","core/templates","core/notification"],(function(_exports,_templates,_notification){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.add_answer_button_event_listener=void 0,_exports.add_cancel_edit_button_listener=function(context){let cancel_question_button=document.querySelector(".cancel_question_button"),modal_div=document.querySelector(".modal_div"),stringForConfirm="";switch(context){case"create":stringForConfirm="Are you sure you want to cancel creating the question?";break;case"edit":stringForConfirm="Are you sure you want to cancel editing the question?";break;case"import":stringForConfirm="Are you sure you want to cancel importing the question?";break;default:stringForConfirm="Are you sure you want to cancel the changes made?"}cancel_question_button.addEventListener("click",(()=>{confirm(stringForConfirm)&&(isEditing=!1,editingIndex=null,modal_div.remove())}))},_exports.append_answer_input=append_answer_input,_exports.create_answer_container=create_answer_container,_exports.rerender_saved_questions_list=function(questions,callback){const contextsavedquestions={questions:questions};document.querySelector("#saved_questions_list").remove(),_templates.default.renderForPromise("mod_livequiz/saved_questions_list",contextsavedquestions).then((_ref=>{let{html:html,js:js}=_ref;_templates.default.appendNodeContents("#saved_questions_container",html,js),"function"==typeof callback&&callback()})).catch((error=>console.log(error)))},_exports.rerender_take_quiz_button=function(url,hasquestions,callback){const contexttakequiz={url:url,hasquestions:hasquestions};if(hasquestions){let no_question_paragraph=document.querySelector(".no_question_text");if(no_question_paragraph)no_question_paragraph.remove();else{document.querySelector("#take_quiz_button").remove()}}else{document.querySelector("#take_quiz_button").remove()}_templates.default.renderForPromise("mod_livequiz/take_quiz_button",contexttakequiz).then((_ref2=>{let{html:html,js:js}=_ref2;_templates.default.appendNodeContents("#page_mod_livequiz_quizcreator",html,js),"function"==typeof callback&&callback()})).catch((error=>(0,_notification.exception)(error)))},_exports.validate_submission=function(answers){let isValid=!0,answersValid=!0,questionTitle=document.getElementById("question_title_id").value.trim(),questionTitleTextarea=document.getElementById("question_title_id"),questionTitleAlert=document.getElementById("title_textarea_alert"),questionDesription=document.getElementById("question_description_id").value.trim(),questionDesriptionTextarea=document.getElementById("question_description_id"),questionDescriptionAlert=document.getElementById("question_textarea_alert"),atLeastOneCorrectAnswerAlert=document.getElementById("question_alert_one_correct"),answerDescriptionAlert=document.getElementById("question_alert_description"),atLeastTwoAnswersAlert=document.getElementById("question_alert_two_answers"),maxOneCorrectAnswerAlert=document.getElementById("question_alert_max_one_correct"),questionType=document.getElementById("question_type_checkbox_id").checked,answersBox=document.getElementById("all_answers"),isValidText=document.getElementById("valid_text");const setBorderStyle=(element,isValid)=>{element.style.border=isValid?"1px solid #ccc":"1px solid red"};questionTitle?(questionTitleAlert.style.display="none",setBorderStyle(questionTitleTextarea,!0)):(setBorderStyle(questionTitleTextarea,!!questionTitle),questionTitleAlert.style.display="block",isValid=!1);questionDesription?(questionDescriptionAlert.style.display="none",setBorderStyle(questionDesriptionTextarea,!0)):(setBorderStyle(questionDesriptionTextarea,!!questionDesription),questionDescriptionAlert.style.display="block",isValid=!1);answers.length<2?(isValid=!1,answersValid=!1,atLeastTwoAnswersAlert.style.display="block"):atLeastTwoAnswersAlert.style.display="none";answers.some((answer=>1===answer.correct))?atLeastOneCorrectAnswerAlert.style.display="none":(isValid=!1,answersValid=!1,atLeastOneCorrectAnswerAlert.style.display="block");answers.some((answer=>!answer.description.trim()))?(isValid=!1,answersValid=!1,answerDescriptionAlert.style.display="block"):answerDescriptionAlert.style.display="none";if(questionType){let checkedAnswers=0;answers.forEach((answer=>{checkedAnswers+=answer.correct})),checkedAnswers>1?(isValid=!1,answersValid=!1,maxOneCorrectAnswerAlert.style.display="block"):maxOneCorrectAnswerAlert.style.display="none"}else maxOneCorrectAnswerAlert.style.display="none";answersBox.style.display=answersValid?"none":"block";if(!isValid)return isValidText.style.display="block",!1;return!0},_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};let IDs=0,isEditing=!1,editingIndex=0;function append_answer_input(){let answer_container=create_answer_container(IDs+1);document.querySelector(".all_answers_for_question_div").appendChild(answer_container),IDs++}function create_answer_container(id){let answer_container=document.createElement("div");answer_container.className="container_for_new_answer";let answer_input=document.createElement("input");answer_input.className="answer_input",answer_input.placeholder="Enter answer",answer_input.id="answer_input_"+id,answer_input.setAttribute("required",!0);let answer_checkbox=document.createElement("input");answer_checkbox.setAttribute("type","checkbox"),answer_checkbox.className="answer_checkbox",answer_checkbox.id="answer_checkbox_"+id;let delete_answer_button=(element_name="delete_answer_button",type="button",class_name="delete_answer_button",content="X",(element_name=document.createElement(type)).className=class_name,element_name.textContent=content,element_name);var element_name,type,class_name,content;return delete_answer_button.id="delete_answer_button_"+id,answer_container.appendChild(answer_checkbox),answer_container.appendChild(answer_input),answer_container.appendChild(delete_answer_button),delete_answer_button.addEventListener("click",(()=>{answer_container.remove()})),answer_container}_exports.add_answer_button_event_listener=()=>{document.querySelector(".add_new_answer_to_question").addEventListener("click",(()=>{append_answer_input()}))}}));

//# sourceMappingURL=edit_question_helper.min.js.map