define("mod_livequiz/student_join_quiz",["exports"],(function(_exports){Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0;_exports.init=(url,studentid)=>{console.log("Student Script is loaded and attempting to attach event listener.");const roomConnectionBtn=document.getElementById("room_connection_button");if(!roomConnectionBtn)return void console.error("Button with id 'room_connection_button' not found!");let roomCodeInput=document.getElementById("roomCode");if(!roomCodeInput)return void console.error("Field with id 'roomCodeInput' not found!");let socket,roomCodeValue="";roomConnectionBtn.addEventListener("click",(async()=>{if(roomCodeValue!==roomCodeInput.value)if(roomCodeValue=roomCodeInput.value,null!==roomCodeValue&&""!==roomCodeValue.trim()){roomCodeInput.disabled=!0,roomConnectionBtn.disabled=!0;try{console.log("sending message"),socket=await async function(url){let socket;return socket=new WebSocket(url),new Promise((function(myResolve,myReject){socket.onopen=()=>{console.log("WebSocket connection established successfully!"),myResolve(socket)},socket.onerror=error=>{console.error("WebSocket encountered an error:",error),myReject()},console.log("WebSocket object created, awaiting connection."),socket.onmessage=event=>{console.log("WebSocket message received:",event.data)},socket.onclose=()=>{console.log("WebSocket connection closed.")}}))}("".concat(url,"?requesttype=connect&userid=").concat(studentid,"&room=").concat(roomCodeValue)),socket.send("Testing some stuff for students "+"".concat(studentid))}catch(e){console.error("Student failed to join room, ".concat(e))}}else console.error("No room code found.");else console.error("Room code already entered.")}));const leaveRoomBtn=document.getElementById("leave_room_button");leaveRoomBtn?leaveRoomBtn.addEventListener("click",(async()=>{let leave_room_request={roomCodeValue:roomCodeValue,requesttype:"leaveroom",studentid:studentid};try{console.log("sending message"),socket.send(JSON.stringify(leave_room_request)),socket.onclose(),roomCodeInput.disabled=!1,roomConnectionBtn.disabled=!1,roomCodeValue=""}catch(e){console.error("Student failed to leave room, ".concat(e))}})):console.error("Button with id 'leave_room_button' not found!")}}));

//# sourceMappingURL=student_join_quiz.min.js.map