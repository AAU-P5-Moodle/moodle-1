define("mod_livequiz/create_question",["exports","core/templates","core/notification","./repository","./delete_question","./edit_question","./edit_question_helper"],(function(_exports,_templates,_notification,_repository,_delete_question,_edit_question,_edit_question_helper){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};let take_quiz_url="";_exports.init=async(quizid,lecturerid,url)=>{take_quiz_url=url,document.getElementById("add_question_button").addEventListener("click",(()=>{!function(quizid,lecturerid){document.querySelector(".modal_div")||_templates.default.renderForPromise("mod_livequiz/question_menu_popup").then((_ref=>{let{html:html,js:js}=_ref;_templates.default.appendNodeContents(".main_container",html,js),(0,_edit_question_helper.add_answer_button_event_listener)(),function(quizid,lecturerid){document.querySelector(".save_button").addEventListener("click",(()=>{!function(quizid,lecturerid){let savedQuestion=function(){let question_input_title=document.getElementById("question_title_id"),question_indput_description=document.getElementById("question_description_id"),question_indput_explanation=document.getElementById("question_explanation_id"),questionTitle=question_input_title.value.trim(),questionDesription=question_indput_description.value.trim(),questionExplanation=question_indput_explanation.value.trim(),questionType=document.getElementById("question_type_checkbox_id").checked?1:0,answers=function(){let answers=[],answers_div=document.querySelector(".all_answers_for_question_div");for(let i=0;i<answers_div.children.length;i++){let answertext=answers_div.children[i].querySelector(".answer_input").value.trim(),iscorrect=answers_div.children[i].querySelector(".answer_checkbox").checked;iscorrect=iscorrect?1:0,answers.push({description:answertext,correct:iscorrect,explanation:""})}return answers}();return{id:0,title:questionTitle,answers:answers,description:questionDesription,explanation:questionExplanation,type:questionType}}();if(!(0,_edit_question_helper.validate_submission)(savedQuestion.answers))return;let update_event_listeners=()=>{(0,_edit_question.add_edit_question_listeners)(quizid,lecturerid),(0,_delete_question.add_delete_question_listeners)(quizid,lecturerid)};(0,_repository.save_question)(savedQuestion,lecturerid,quizid).then((questions=>{(0,_edit_question_helper.rerender_saved_questions_list)(questions,update_event_listeners),(0,_edit_question_helper.rerender_take_quiz_button)(take_quiz_url,!0)})),document.querySelector(".modal_div").remove()}(quizid,lecturerid)}))}(quizid,lecturerid),(0,_edit_question_helper.add_cancel_edit_button_listener)("create")})).catch((error=>(0,_notification.exception)(error)))}(quizid,lecturerid)}))}}));

//# sourceMappingURL=create_question.min.js.map