define("mod_livequiz/create_question",["exports","core/templates","core/notification","./repository"],(function(_exports,_templates,_notification,_repository){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};let isEditing=!1,editingIndex=0,IDs=0,take_quiz_url="";_exports.init=async(quizid,lecturerid,url)=>{take_quiz_url=url,document.getElementById("id_buttonaddquestion").addEventListener("click",(()=>{!function(quizid,lecturerid){_templates.default.renderForPromise("mod_livequiz/question_menu_popup").then((_ref=>{let{html:html,js:js}=_ref;_templates.default.appendNodeContents(".main-container",html,js),document.querySelector(".add_new_answer_to_question").addEventListener("click",(()=>{!function(){let answer_container=document.createElement("div");answer_container.className="container_for_new_answer";let answer_input=document.createElement("input");answer_input.className="answer_input",answer_input.placeholder="Enter answer",answer_input.id="answer_input_"+(IDs+1),answer_input.setAttribute("required",!0);let answer_checkbox=document.createElement("input");answer_checkbox.setAttribute("type","checkbox"),answer_checkbox.className="answer_checkbox",answer_checkbox.id="answer_checkbox_"+(IDs+1);let delete_answer_button=(element_name="delete_answer_button",type="button",class_name="delete_answer_button",content="X",(element_name=document.createElement(type)).className=class_name,element_name.textContent=content,element_name);var element_name,type,class_name,content;delete_answer_button.id="delete_answer_button_"+(IDs+1),answer_container.appendChild(answer_checkbox),answer_container.appendChild(answer_input),answer_container.appendChild(delete_answer_button),delete_answer_button.addEventListener("click",(()=>{answer_container.remove()})),document.querySelector(".all_answers_for_question_div").appendChild(answer_container),IDs++}()})),function(quizid,lecturerid){document.querySelector(".save_button").addEventListener("click",(()=>{!function(quizid,lecturerid){let question_input_title=document.getElementById("question_title_id"),question_indput_description=document.getElementById("question_description_id"),question_indput_explanation=document.getElementById("question_explanation_id"),questionTitle=question_input_title.value.trim(),questionDesription=question_indput_description.value.trim(),questionExplanation=question_indput_explanation.value.trim();if(!questionDesription)return void alert("Please enter a question description.");questionTitle||(questionTitle="Question");let answers=[],answers_div=document.querySelector(".all_answers_for_question_div");for(let i=0;i<answers_div.children.length;i++){let answertext=answers_div.children[i].querySelector(".answer_input").value.trim(),iscorrect=answers_div.children[i].querySelector(".answer_checkbox").checked;iscorrect=iscorrect?1:0,answers.push({description:answertext,correct:iscorrect,explanation:""})}let savedQuestion={id:0,title:questionTitle,answers:answers,description:questionDesription,explanation:questionExplanation};(0,_repository.save_question)(savedQuestion,lecturerid,quizid).then((questions=>{const contextsavedquestions={questions:questions},contexttakequiz={url:take_quiz_url,hasquestions:!0};document.querySelector("#saved_questions_list").remove(),_templates.default.renderForPromise("mod_livequiz/saved_questions_list",contextsavedquestions).then((_ref2=>{let{html:html,js:js}=_ref2;_templates.default.appendNodeContents("#saved-questions-container",html,js)})).catch((error=>(0,_notification.exception)(error)));let no_question_paragraph=document.querySelector(".no-question-text");null!=no_question_paragraph&&(no_question_paragraph.remove(),_templates.default.renderForPromise("mod_livequiz/take_quiz_button",contexttakequiz).then((_ref3=>{let{html:html,js:js}=_ref3;_templates.default.appendNodeContents("#page-mod-livequiz-quizcreator",html,js)})).catch((error=>(0,_notification.exception)(error))))})),document.querySelector(".Modal_div").remove()}(quizid,lecturerid)}))}(quizid,lecturerid),document.querySelector(".discard_question_button").addEventListener("click",(()=>{_templates.default.renderForPromise("mod_livequiz/question_confirmation").then((_ref4=>{let{html:html,js:js}=_ref4;_templates.default.appendNodeContents(".Modal_div",html,js),function(){let toast_promise_deletion_div=document.querySelector(".toast_promise_deletion_div"),cancel_question_deletion_button=document.querySelector(".cancel_question_deletion_button"),continue_question_deletion_button=document.querySelector(".continue_question_deletion_button"),modal_div=document.querySelector(".Modal_div");continue_question_deletion_button.addEventListener("click",(()=>{isEditing=!1,editingIndex=null,modal_div.remove()})),cancel_question_deletion_button.addEventListener("click",(()=>{toast_promise_deletion_div.remove()}))}()})).catch((error=>(0,_notification.exception)(error)))}))})).catch((error=>(0,_notification.exception)(error)))}(quizid,lecturerid)}))}}));

//# sourceMappingURL=create_question.min.js.map