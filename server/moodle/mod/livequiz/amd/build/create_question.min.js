define("mod_livequiz/create_question",["exports","core/templates","core/notification","./repository","./delete_question","./edit_question","./edit_question_helper"],(function(_exports,_templates,_notification,_repository,_delete_question,_edit_question,_edit_question_helper){var obj;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_templates=(obj=_templates)&&obj.__esModule?obj:{default:obj};let takeQuizUrl="";_exports.init=async(quizId,lecturerId,url)=>{takeQuizUrl=url,document.getElementById("id_buttonaddquestion").addEventListener("click",(()=>{!function(quizId,lecturerId){document.querySelector(".Modal_div")||_templates.default.renderForPromise("mod_livequiz/question_menu_popup").then((_ref=>{let{html:html,js:js}=_ref;_templates.default.appendNodeContents(".main-container",html,js),(0,_edit_question_helper.addAnswerButtonEventListener)(),function(quizId,lecturerId){document.querySelector(".save_button").addEventListener("click",(()=>{!function(quizId,lecturerId){let savedQuestion=function(){let questionInputTitle=document.getElementById("question_title_id"),questionInputDescription=document.getElementById("question_description_id"),questionInputExplanation=document.getElementById("question_explanation_id"),questionTitle=questionInputTitle.value.trim(),questionDescription=questionInputDescription.value.trim(),questionExplanation=questionInputExplanation.value.trim();if(!questionDescription)return void alert("Please enter a question description.");questionTitle||(questionTitle="Question");let answers=function(){let answers=[],answersDiv=document.querySelector(".all_answers_for_question_div");for(let i=0;i<answersDiv.children.length;i++){let answerText=answersDiv.children[i].querySelector(".answer_input").value.trim(),isCorrect=answersDiv.children[i].querySelector(".answer_checkbox").checked;isCorrect=isCorrect?1:0,answers.push({description:answerText,correct:isCorrect,explanation:""})}return answers}();return{id:0,title:questionTitle,answers:answers,description:questionDescription,explanation:questionExplanation}}(),updateEventListeners=()=>{(0,_edit_question.addEditQuestionListeners)(quizId,lecturerId),(0,_delete_question.addDeleteQuestionListeners)(quizId,lecturerId)};(0,_repository.saveQuestion)(savedQuestion,lecturerId,quizId).then((questions=>{(0,_edit_question_helper.rerenderSavedQuestionsList)(questions,updateEventListeners),(0,_edit_question_helper.rerenderTakeQuizButton)(takeQuizUrl,!0)})),document.querySelector(".Modal_div").remove()}(quizId,lecturerId)}))}(quizId,lecturerId),(0,_edit_question_helper.addDiscardQuestionButtonListener)()})).catch((error=>(0,_notification.exception)(error)))}(quizId,lecturerId)}))}}));

//# sourceMappingURL=create_question.min.js.map